import{J as B,o as p,q as _,t,B as I,y as P,u as R,k as y,K as f,w as b,r as x,v as S,L as M,$ as V,E as C,G as E,F as K,D as T,M as A,N as U,c as D,I as F}from"./vendor.eae21ba8.js";import{f as k}from"./api.b01730aa.js";import{S as J,P as j}from"./SideNav.c241cc1c.js";import{_ as L}from"./index.8c38c7d6.js";import{s as q}from"./statusStore.f4307df1.js";const O={props:["result-item"],emits:["addCollection","addCart"],setup(){const o=B();function a(d){d.searchCategory==="\u5546\u54C1"?o.push(`/products/${d.id}`):o.push(`/arts/${d.id}`)}return{goToPage:a}}},z={class:"relative mb-3 block"},G={key:0,class:"absolute top-0 left-0 bg-primaryLight px-3 py-0.5 rounded-tl rounded-br text-black font-medium text-lg z-10"},H=["src","alt"],W={class:"flex justify-between items-center mb-2"},Q={class:"border border-gray-300 px-2 py-0.5 text-sm"},X={class:"cursor-pointer text-xl text-black font-medium block"};function Y(o,a,d,s,m,h){return p(),_("div",{class:"bg-white group p-4 hover:bg-gray-100/50 cursor-pointer",onClick:a[0]||(a[0]=i=>s.goToPage(o.resultItem))},[t("div",z,[o.resultItem.promoted.star?(p(),_("p",G," Hot ")):I("",!0),t("img",{class:"w-full bg-gray-300 rounded",src:o.resultItem.imageUrl||o.resultItem.imagesUrl[0],alt:`${o.resultItem.title}\u7522\u54C1\u5716\u7247`},null,8,H)]),t("div",W,[t("p",Q,P(o.resultItem.category),1)]),t("p",X,P(o.resultItem.title),1)])}var Z=L(O,[["render",Y]]);const ee={components:{SideNav:J,Pagination:j,SearchResultListItem:Z},setup(){const o=q(),a=R();let d=y(()=>a.query.keyword);const s=f([]),m=f(d.value||""),h=f(""),i=f({totalPages:1,nowPage:1}),g=y(()=>{let e=s.value;return e=n(m.value,e),e=N(h.value,e),e}),v=y(()=>{let e=[];if(g.value.length<=12)return g.value;{const r=i.value.nowPage*12-12;return g.value.forEach((l,u)=>{r<=u&&u<i.value.nowPage*12&&e.push(l)}),e}});b(g,(e,r)=>{e.length!==r.length&&(i.value.nowPage=1,i.value.totalPages=Math.ceil(e.length/12))}),b(i.value,()=>{o.mainContainer.scrollTo({top:0,behavior:"smooth"})}),b(d,e=>{m.value=e});function n(e,r){let l=r;return e!==""&&e!==void 0&&(l=r.filter(u=>u.title.includes(e)||u.tags.includes(e))),l}function N(e,r){let l=r;return e!==""&&e!==void 0&&(l=r.filter(u=>u.searchCategory===e)),l}function $(){o.isLoading=!0,k.getProductAll().then(e=>{s.value=JSON.parse(JSON.stringify(e)),s.value.forEach(r=>r.searchCategory="\u5546\u54C1"),o.isLoading=!1,w()})}function w(e=1){o.isLoading=!0,k.getArts(e).then(r=>{r.articles.forEach(l=>{l.searchCategory="\u5275\u4F5C",s.value.push(l)}),r.pagination.has_next&&w(r.pagination.current_page+1),o.isLoading=!1,s.value.sort(()=>.5-Math.random())})}return $(),{allResultList:s,filterKeyword:m,resultCategory:h,nowPageItems:v,paginationData:i}}},c=o=>(A("data-v-7e029ad8"),o=o(),U(),o),te={class:"relative bg-white grid grid-cols-12 lg:px-24 md:px-16 px-4 md:py-32 py-16 md:gap-x-8 w-full"},oe={class:"col-start-2 col-span-10 lg:mb-32 md:mb-24 mb-16"},se=c(()=>t("h4",{class:"text-xl text-black uppercase mb-8"},"Search",-1)),ae=c(()=>t("h3",{class:"lg:text-8xl text-5xl text-black font-medium md:mb-16 mb-8"}," \u5168\u7AD9\u641C\u5C0B ",-1)),re={class:"flex md:flex-row flex-col md:gap-8 gap-4"},ne={class:"pageInputBox flex-1"},le=c(()=>t("i",{class:"bi bi-x text-xl group-hover:text-red-600"},null,-1)),ie=[le],de=c(()=>t("div",{class:"underLine"},null,-1)),ce={class:"pageSelectBox flex-1 md:hidden"},ue=c(()=>t("option",{selected:"",value:""},"\u5168\u90E8\u985E\u5225",-1)),ge=c(()=>t("option",{value:"\u5546\u54C1"},"\u5546\u54C1",-1)),pe=c(()=>t("option",{value:"\u5275\u4F5C"},"\u5275\u4F5C",-1)),me=[ue,ge,pe],_e=c(()=>t("div",{class:"underLine"},null,-1)),he={class:"md:col-span-2 relative md:block hidden"},fe={class:"sticky top-32"},ve=F("\u641C\u5C0B\u985E\u5225"),ye={class:"md:col-span-10 col-span-12 grid xl:grid-cols-3 lg:grid-cols-2 grid-cols-1 lg:gap-x-8 mb-8"},be={key:0,class:"md:col-start-3 md:col-span-10 col-span-12 flex justify-center"};function xe(o,a,d,s,m,h){const i=x("SideNav"),g=x("SearchResultListItem"),v=x("Pagination");return p(),_("div",te,[t("div",oe,[se,ae,t("div",re,[t("div",ne,[S(t("input",{class:"appearance-none bg-transparent border-b border-gray-300 w-full text-gray-700 p-2 leading-tight focus:outline-none",type:"text",id:"inputSearch",placeholder:"\u641C\u5C0B\u95DC\u9375\u5B57","onUpdate:modelValue":a[0]||(a[0]=n=>s.filterKeyword=n)},null,512),[[M,s.filterKeyword]]),t("button",{type:"button",class:"py-1.5 px-2 searchBtn group",onClick:a[1]||(a[1]=n=>s.filterKeyword="")},ie),de]),t("div",ce,[S(t("select",{class:"cursor-pointer appearance-none bg-transparent border-b border-gray-300 w-full p-2 leading-tight focus:outline-none",id:"filterCategory",value:"modelValue","onUpdate:modelValue":a[2]||(a[2]=n=>s.resultCategory=n)},me,512),[[V,s.resultCategory]]),_e])])]),t("div",he,[t("div",fe,[C(i,{"nav-list":["\u5546\u54C1","\u5275\u4F5C"],onChangeSideNav:a[3]||(a[3]=n=>s.resultCategory=n)},{default:E(()=>[ve]),_:1})])]),t("div",ye,[(p(!0),_(K,null,T(s.nowPageItems,n=>(p(),D(g,{key:n.id,"result-item":n},null,8,["result-item"]))),128))]),s.paginationData.totalPages>1?(p(),_("div",be,[C(v,{"pagination-data":s.paginationData,onChangePageNumber:a[4]||(a[4]=n=>s.paginationData.nowPage=n)},null,8,["pagination-data"])])):I("",!0)])}var Ie=L(ee,[["render",xe],["__scopeId","data-v-7e029ad8"]]);export{Ie as default};
