import{d as S,a as M}from"./article.71aae005.js";import{L as f,n as D,w as N,r as _,o as i,t as n,v as t,B as y,A as p,G as R,F as h,E as I,H as v,D as V,I as U,x as J,a4 as L,K as C,J as j,c as z}from"./vendor.dd24d7c7.js";import{a as A}from"./api.35fab65f.js";import{I as P,F as G,a as q,b as T,c as E}from"./FormInputSelect.8072e762.js";import{_ as O}from"./index.4c6551d2.js";import{R as H}from"./RowNav.256e42d0.js";import"./data.9734558e.js";const K={components:{ImgUploader:P,FormInput:G,FromArtic:q,FormInputSelect:T},props:["select-item","modal-open","modal-state"],emits:["get-article","clear-item"],setup(r,{emit:l}){const o=f(JSON.parse(JSON.stringify(S))),e=f(!1),s=D(()=>r.modalState),g=D(()=>r.selectItem.id),u=f(1),b=f(null),x=f([{useUrl:!0,url:""}]);function d(){const[m]=b.value.files;A.adminImageUpload(m)}function a(m,k){if(k!=="\u4E3B\u8981\u5716\u7247"){const B=k.slice(2);o.value.imagesUrl[B]=m}}function c(m){A.adminGetArticle(m).then(k=>{o.value=k,e.value=!0})}function w(){o.value.create_at=new Date().getTime(),r.modalState==="isNew"?A.adminPostArticle(o.value).then(()=>{F()}):r.modalState==="edit"&&A.adminUpdateArticle(o.value.id,o.value).then(()=>{F()})}function F(){e.value=!1,l("get-article"),l("clear-item"),o.value=JSON.parse(JSON.stringify(S))}return N(g,m=>{m!==""&&s.value==="edit"&&c(m)}),N(s,m=>{m==="isNew"&&(e.value=!0)}),N(e,m=>{m===!1&&o.value.id!==""&&(l("clear-item"),o.value=JSON.parse(JSON.stringify(S)))}),{articleCategory:M,modalState:s,modalOpen:e,imgsData:x,listState:u,articleItem:o,imgCoverUploader:b,upload:d,getUrl:a,newArticle:w}}},Q={class:"flex flex-col relative h-full"},W={class:"flex justify-between items-center border-b border-gray-300 py-4 px-6"},X={class:"text-2xl"},Y=t("i",{class:"bi bi-x text-xl group-hover:text-gray-900"},null,-1),Z=[Y],$={class:"grid grid-cols-6 gap-x-8 gap-y-4 p-6 flex-shrink"},tt={class:"col-span-6"},et=t("label",{class:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2 pl-2"}," \u6587\u7AE0\u5716\u7247 ",-1),lt={class:"grid grid-cols-3 gap-4"},ot=["onClick"],rt=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-full w-full",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),at=[rt],it={class:"col-span-6 lg:col-span-3"},st=C("\u6587\u7AE0\u6A19\u984C"),nt={class:"col-span-6 lg:col-span-3"},ct=C("\u6587\u7AE0\u5206\u985E"),dt={class:"col-span-6"},mt={class:"col-span-6 grid grid-cols-6 gap-4"},ut=t("h3",{class:"col-span-6 text-xl font-bold border-b border-gray-300 pb-3 mb-4"}," \u5176\u4ED6\u8CC7\u8A0A ",-1),gt={class:"col-span-6 lg:col-span-2"},pt=t("label",{class:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2 pl-2",for:"productImgCover"}," \u5546\u54C1\u662F\u5426\u520A\u767B\u65BC\u9996\u9801 ",-1),bt={class:"flex items-center"},vt={class:"col-span-6 mb-12"},_t={class:"grid grid-cols-3 gap-4"},ht=["onClick"],yt=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-full w-full",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),ft=[yt],xt={class:"flex p-4 w-full border-t border-gray-200 bg-white"},wt={type:"submit",class:"flex-1 bg-purple-200 text-purple-600 rounded py-2 px-3 hover:border-gray-300"};function It(r,l,o,e,s,g){const u=_("ImgUploader"),b=_("FormInput"),x=_("FormInputSelect"),d=_("FromArtic");return i(),n(h,null,[t("div",{class:y(["siderBg z-sider",{active:e.modalOpen}]),onClick:l[0]||(l[0]=a=>e.modalOpen=!1)},null,2),t("div",{class:y(["siderBox z-sider",{active:e.modalOpen===!0}])},[t("div",Q,[t("div",W,[t("h3",X,p(e.modalState==="isNew"?"\u65B0\u589E\u5716\u6587\u5275\u4F5C":e.articleItem.title),1),t("button",{type:"button",class:"rounded py-1.5 px-3",onClick:l[1]||(l[1]=a=>r.$emit("clear-item"))},Z)]),t("form",{onSubmit:l[10]||(l[10]=R((...a)=>e.newArticle&&e.newArticle(...a),["prevent"])),class:"flex flex-col flex-shrink overflow-y-scroll"},[t("div",$,[t("div",tt,[et,t("div",lt,[(i(!0),n(h,null,I(e.articleItem.imagesUrl,(a,c)=>(i(),n("div",{class:"relative",key:`img${c}`},[v(u,{onSendImgUrl:e.getUrl,"img-name":`\u5716\u7247${c}`,"exist-img-url":a},null,8,["onSendImgUrl","img-name","exist-img-url"]),t("button",{type:"button",class:y([{hidden:c==0},"h-7 w-7 p-1 bg-gray-200 active:scale-90 rounded-md cursor-pointer transition-all absolute top-0 right-0 translate-x-3 -translate-y-3"]),onClick:w=>e.articleItem.imagesUrl.splice(c,1)},at,10,ot)]))),128)),e.articleItem.imagesUrl.length||e.articleItem.imagesUrl[e.articleItem.imagesUrl.length-1]!==""?(i(),n("button",{key:0,type:"button",class:"w-full py-24 border border-gray-300 rounded px-3 hover:bg-gray-100",onClick:l[2]||(l[2]=a=>e.articleItem.imagesUrl.push(""))}," \u65B0\u589E\u5716\u7247\u6B04\u4F4D ")):V("",!0)])]),t("div",it,[v(b,{modelValue:e.articleItem.title,"onUpdate:modelValue":l[3]||(l[3]=a=>e.articleItem.title=a),"input-id":"productTitle",type:"text"},{default:U(()=>[st]),_:1},8,["modelValue"])]),t("div",nt,[v(x,{modelValue:e.articleItem.category,"onUpdate:modelValue":l[4]||(l[4]=a=>e.articleItem.category=a),"input-id":"articleCategory","select-data":e.articleCategory},{default:U(()=>[ct]),_:1},8,["modelValue","select-data"])]),t("div",dt,[v(d,{"input-id":"productContent","input-name":"\u5275\u4F5C\u5167\u5BB9\u6216\u6587\u7AE0","text-holder":"\u8ACB\u8F38\u5165\u5275\u4F5C\u5167\u5BB9\u6216\u6587\u7AE0",modelValue:e.articleItem.content,"onUpdate:modelValue":l[5]||(l[5]=a=>e.articleItem.content=a)},null,8,["modelValue"])]),t("div",mt,[ut,t("div",gt,[pt,t("div",bt,[t("div",null,[J(t("input",{class:"hidden",type:"radio",id:"articleNormal",value:"0","onUpdate:modelValue":l[6]||(l[6]=a=>e.articleItem.promoted.star=a)},null,512),[[L,e.articleItem.promoted.star,void 0,{number:!0}]]),t("label",{for:"articleNormal",class:y([{"bg-black/60 text-white":e.articleItem.promoted.star==0},"cursor-pointer block py-1.5 px-3 mr-2 border border-gray-200 rounded hover:border-gray-300"])},"\u4E00\u822C\u6587\u7AE0",2)]),t("div",null,[J(t("input",{class:"hidden",type:"radio",id:"articleStar",value:"1","onUpdate:modelValue":l[7]||(l[7]=a=>e.articleItem.promoted.star=a)},null,512),[[L,e.articleItem.promoted.star,void 0,{number:!0}]]),t("label",{for:"articleStar",class:y([{"bg-black/60 text-white":e.articleItem.promoted.star>0},"cursor-pointer block py-1.5 px-3 mr-2 border border-gray-200 rounded hover:border-gray-300"])},"\u9996\u9801\u6587\u7AE0",2)])])]),t("div",vt,[t("div",_t,[(i(!0),n(h,null,I(e.articleItem.tags,(a,c)=>(i(),n("div",{key:c,class:"flex-1 relative"},[v(b,{modelValue:e.articleItem.tags[c],"onUpdate:modelValue":w=>e.articleItem.tags[c]=w,"input-id":"productlength",type:"text"},{default:U(()=>[C("\u6587\u7AE0\u6A19\u7C64"+p(c+1),1)]),_:2},1032,["modelValue","onUpdate:modelValue"]),t("button",{type:"button",class:y([{hidden:c==0},"h-7 w-7 p-1 bg-gray-200 active:scale-90 rounded-md cursor-pointer transition-all absolute top-0 right-0 translate-x-3 translate-y-2"]),onClick:w=>e.articleItem.tags.splice(c,1)},ft,10,ht)]))),128)),e.articleItem.tags.length||e.articleItem.tags[e.articleItem.tags.length-1]!==""?(i(),n("button",{key:0,type:"button",class:"w-full border border-gray-300 py-1.5 px-3 hover:bg-gray-100",onClick:l[8]||(l[8]=a=>e.articleItem.tags.push(""))}," \u65B0\u589E\u6A19\u7C64\u6B04\u4F4D ")):V("",!0)])])])]),t("div",xt,[t("button",{type:"button",class:"mr-2 border border-gray-200 rounded py-2 px-3 hover:border-gray-300",onClick:l[9]||(l[9]=a=>r.$emit("clear-item"))}," \u53D6\u6D88 "),t("button",wt,p(e.modalState==="isNew"?"\u4E0A\u50B3\u6587\u7AE0":"\u66F4\u65B0\u6587\u7AE0"),1)])],32)])],2)],64)}var kt=O(K,[["render",It]]);const At={props:["article"],emits:["changeArticleState","openArticleDetail","deleteArticle"]},St={class:"group"},Ct={class:"relative mb-2"},Nt={class:"cursor-pointer bg-primaryLight px-2 py-0.5 rounded-tl hover:bg-black hover:text-white absolute left-0 top-0 z-10"},Ut=["src","alt"],Dt={class:"hidden group-hover:flex group-hover:bg-black/30 space-x-3 flex-1 justify-center items-center absolute top-0 left-0 w-full h-full rounded"},Vt=["data-id"],Ot=t("p",null,"\u67E5\u770B\u8CBC\u6587",-1),Ft=[Ot],Jt=["data-id"],Lt=["data-id"],Mt=t("i",{class:"bi bi-trash2-fill text-xl"},null,-1),Bt=[Mt],Rt={class:"group-hover:text-yellow-600 mb-1"},jt={class:"flex flex-wrap"};function zt(r,l,o,e,s,g){return i(),n("div",St,[t("div",Ct,[t("p",Nt,p(o.article.category),1),t("img",{class:"w-100 bg-gray-300 rounded",src:o.article.imagesUrl[0],alt:`${o.article.title}\u6587\u7AE0\u5716\u7247`},null,8,Ut),t("div",Dt,[t("button",{type:"button",class:"border border-gray-200 rounded py-2 px-3 hover:border-gray-300 bg-white","data-action":"remove","data-id":o.article.id,onClick:l[0]||(l[0]=u=>r.$emit("openArticleDetail","edit",o.article))},Ft,8,Vt),t("button",{type:"button",class:"border border-gray-200 rounded py-2 px-3 hover:border-gray-300 bg-white","data-action":"remove","data-id":o.article.id,onClick:l[1]||(l[1]=u=>r.$emit("changeArticleState",o.article))},[t("p",null,p(o.article.isPublic?"\u4E0B\u67B6\u8CBC\u6587":"\u4E0A\u67B6\u8CBC\u6587"),1)],8,Jt),o.article.isPublic?V("",!0):(i(),n("button",{key:0,type:"button",class:"border border-gray-200 rounded py-2 px-3 hover:border-gray-300 bg-white","data-action":"remove","data-id":o.article.id,onClick:l[2]||(l[2]=u=>r.$emit("deleteArticle",o.article.id))},Bt,8,Lt))])]),t("p",Rt,p(o.article.title),1),t("div",jt,[(i(!0),n(h,null,I(o.article.tags,u=>(i(),n("p",{class:"text-sm mr-1",key:u}," #"+p(u),1))),128))]),t("p",null,p(o.article.create_at),1)])}var Pt=O(At,[["render",zt]]);const Gt={components:{AdminArtSlider:kt,RowNav:H,AdminArticleListItemSquare:Pt},setup(){const r=E(),l=f(1),o=D(()=>{let s=[];return l.value===2?s=r.articles.filter(g=>g.isPublic):l.value===3?s=r.articles.filter(g=>!g.isPublic):s=r.articles,s});function e(s,g){s==="isNew"?r.articleItem=JSON.parse(JSON.stringify(S)):s==="edit"&&(r.articleItem=JSON.parse(JSON.stringify(g))),r.articleModel.state=s}return r.getArticles(),{adminData:r,articleList:o,listState:l,articleCategory:M,openArticleDetail:e}}},qt={class:"relative bg-white"},Tt={class:"sticky top-0 bg-white z-40 px-5 pt-6 border-b border-gray-300 mb-6"},Et={class:"grid grid-cols-3 mb-8"},Ht=t("div",{class:"col-span-1"},[t("h3",{class:"text-3xl font-medium"},"\u6587\u7AE0\u5217\u8868")],-1),Kt={class:"col-span-2 flex justify-end"},Qt={class:"grid grid-cols-5 p-5 gap-4"},Wt={class:"col-span-1 min-h-screen"},Xt=j('<ul class="mb-6"><li class="text-sm text-gray-400 mb-2">\u6587\u7AE0\u7B49\u7D1A</li><li class="group py-2 px-5 cursor-pointer hover:text-yellow-600"><span class="w-3 h-px bg-gray-300 block absolute top-1/2 left-0 group-hover:bg-yellow-400"></span>\u4E00\u822C\u6587\u7AE0 </li><li class="group py-2 px-5 cursor-pointer hover:text-yellow-600"><span class="w-3 h-px bg-gray-300 block absolute top-1/2 left-0 group-hover:bg-yellow-400"></span>\u9996\u9801\u6587\u7AE0 </li></ul>',1),Yt={class:"mb-6"},Zt=t("li",{class:"text-sm text-gray-400 mb-2"},"\u6587\u7AE0\u985E\u5225",-1),$t=t("span",{class:"w-3 h-px bg-gray-300 block absolute top-1/2 left-0 group-hover:bg-yellow-400"},null,-1),te={class:"col-start-2 col-span-4"},ee={class:"grid grid-cols-3 gap-4"};function le(r,l,o,e,s,g){const u=_("RowNav"),b=_("AdminArticleListItemSquare"),x=_("AdminArtSlider");return i(),n(h,null,[t("div",qt,[t("div",Tt,[t("div",Et,[Ht,t("div",Kt,[t("button",{type:"button",class:"border border-gray-200 rounded py-2 px-3 hover:border-gray-300",onClick:l[0]||(l[0]=d=>e.openArticleDetail("isNew",e.adminData.articleItem))}," \u65B0\u589E\u6587\u7AE0 ")])]),v(u,{"list-state":e.listState,"nav-array":["\u5168\u90E8\u6587\u7AE0","\u520A\u767B\u4E2D","\u5DF2\u4E0B\u67B6"],onReturnState:l[1]||(l[1]=d=>e.listState=d)},null,8,["list-state"])]),t("div",Qt,[t("div",Wt,[Xt,t("ul",Yt,[Zt,(i(!0),n(h,null,I(e.articleCategory,d=>(i(),n("li",{key:d,class:"group py-2 px-5 cursor-pointer relative hover:text-yellow-600"},[$t,C(p(d),1)]))),128))])]),t("div",te,[t("div",ee,[(i(!0),n(h,null,I(e.articleList,d=>(i(),z(b,{key:d.id,article:d,onChangeArticleState:e.adminData.changeArticleState,onOpenArticleDetail:e.openArticleDetail,onDeleteArticle:e.adminData.deleteArticle},null,8,["article","onChangeArticleState","onOpenArticleDetail","onDeleteArticle"]))),128))])])])]),v(x,{"select-item":e.adminData.articleItem,"modal-state":e.adminData.articleModel.state,onGetArticle:e.adminData.getArticles,onClearItem:e.adminData.clearArticleItem},null,8,["select-item","modal-state","onGetArticle","onClearItem"])],64)}var de=O(Gt,[["render",le]]);export{de as default};
