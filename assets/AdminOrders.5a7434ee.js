import{a as M}from"./api.b585f04c.js";import{p as U,d as j}from"./data.9734558e.js";import{R as B}from"./RowNav.e1b3916f.js";import{_ as C}from"./index.a6fac441.js";import{n as S,o as c,t as m,v as e,A as r,K as N,L as h,x,y as k,F as v,N as P,O as T,a1 as D,w as A,q as E,r as w,B as g,c as L,I as F,H as f,E as O,D as z}from"./vendor.bfa7d6b3.js";import{s as R,p as W,a as q,b as G,o as J}from"./order.0676dcce.js";import{V as H}from"./VeeFormInput.28fc087a.js";import{F as K}from"./FormInputTextArea.0dc5ae7c.js";const Q={props:["order","listIndex"],setup(n){const s=S(()=>Object.keys(n.order.products)),a=S(()=>n.order.products[s.value[0]]),t=S(()=>{let p=0;return s.value.forEach(d=>{p+=n.order.products[d].qty}),p});return{firstOrderProduct:a,totalQty:t}}},X={class:"group border-b border-gray-200 py-4 flex items-center space-x-6 hover:bg-gray-50 hover:bg-opacity-50 relative cursor-pointer"},Y={class:"absolute top-4 right-4"},Z={class:"bg-gray-100 rounded py-1 px-2 text-xs"},$={class:"w-24 h-24 bg-gray-300 rounded-md"},ee=["src"],te={class:"flex-1 space-y-2"},se={class:"group-hover:text-yellow-700 text-lg font-medium"},oe={class:"text-sm text-gray-500"},re=e("span",{class:"mr-2"},"\u8A02\u8CFC\u4EBA",-1),ne={class:"text-sm text-gray-500"},le=e("span",{class:"mr-2"},"\u8A02\u55AE\u91D1\u984D",-1),de=e("div",{class:"flex justify-end self-end pr-4"},[e("p",{class:"text-sm text-gray-400"},"2021/12/12 12:30")],-1);function ae(n,s,a,t,p,d){return c(),m("div",X,[e("div",Y,[e("p",Z,r(a.order.is_paid?"\u8A02\u55AE\u5DF2\u4ED8\u6B3E":"\u8A02\u55AE\u672A\u4ED8\u6B3E"),1)]),e("div",$,[e("img",{class:"w-100 h-100",src:t.firstOrderProduct.product.imageUrl,alt:"\u8A02\u55AE\u5546\u54C1\u5716\u7247"},null,8,ee)]),e("div",te,[e("p",se," #"+r(a.order.id),1),e("p",oe,[re,N(" "+r(a.order.user.name),1)]),e("p",ne,[le,N("NT$"+r(a.order.total),1)])]),de])}var ie=C(Q,[["render",ae]]);const ce={props:["item-id"],emits:["delete-item","edit-item"],setup(){return{modalOpen:h(!1)}}},_e=n=>(P("data-v-b1c32ea0"),n=n(),T(),n),me={class:"moreMenu"},ue=_e(()=>e("i",{class:"bi bi-three-dots text-xl"},null,-1)),pe=[ue],be={class:"moreMenu__box border border-gray-300 rounded bg-white"};function Ie(n,s,a,t,p,d){return c(),m(v,null,[e("div",me,[e("button",{type:"button",onClick:s[0]||(s[0]=b=>t.modalOpen=!t.modalOpen),class:"border border-gray-200 rounded py-1 px-2 hover:border-gray-300 bg-white"},pe),x(e("ul",be,[e("li",{onClick:s[1]||(s[1]=b=>n.$emit("edit-item",n.itemId)),class:"cursor-pointer border-b border-gray-300 pl-12 pr-4 py-2 moreMenu__item"}," \u7DE8\u8F2F "),e("li",{onClick:s[2]||(s[2]=b=>n.$emit("delete-item",n.itemId)),class:"cursor-pointer border-b border-gray-300 pl-12 pr-4 py-2 moreMenu__item"}," \u522A\u9664 ")],512),[[k,t.modalOpen===!0]])]),x(e("div",{class:"fixed top-0 bottom-0 left-0 right-0 z-50",onClick:s[3]||(s[3]=b=>t.modalOpen=!1)},null,512),[[k,t.modalOpen===!0]])],64)}var he=C(ce,[["render",Ie],["__scopeId","data-v-b1c32ea0"]]);const fe={components:{MoreMenu:he,VeeFormInput:H,FormInputTextArea:K,Form:D},props:["select-order"],emits:["get-orders"],setup(n,{emit:s}){const a=h(!1),t=h(!1),p=h(!1),d=S(()=>n.selectOrder);function b(_){M.adminDeleteOrder(_).then(()=>{a.value=!1,s("get-orders")})}function u(_){M.adminPutOrder(_,d.value).then(()=>{a.value=!1,s("get-orders")})}function y(){d.value.is_paid=!d.value.is_paid,d.value.is_paid?d.value.user.pay.status=1:d.value.user.pay.status=0,u(d.value.id)}function i(){d.value.user.shipping.status<1?(d.value.user.shipping.status=1,d.value.user.orderStatus=2):(d.value.user.shipping.status=0,d.value.user.orderStatus=1),u(d.value.id)}return A(d,()=>{a.value=!0}),A(a,()=>{a.value||(t.value=a.value)}),E(()=>{a.value=!1}),{selectItem:d,modalOpen:a,editMode:t,listOpen:p,shippingWay:R,payWay:W,payStatus:q,shippingStatus:G,orderStatus:J,deleteOrder:b,adminPutOrder:u,changePayState:y,changeShippingStatus:i}}},l=n=>(P("data-v-18b15a9d"),n=n(),T(),n),ve={class:"flex justify-between items-center border-b border-gray-300 px-4 py-3"},ye={class:"text-lg text-black font-medium"},ge={class:"flex"},xe=l(()=>e("i",{class:"bi bi-x text-xl"},null,-1)),ke=[xe],we={class:"overflow-y-scroll px-4 py-3 flex-shrink"},Oe={class:"border-b border-gray-300 mb-4"},Se={class:"orderInfoItem"},Ce=l(()=>e("p",{class:"orderInfoItem__title"},"\u8A02\u8CFC\u4EBA\u540D\u7A31",-1)),Ve={class:"orderInfoItem__content"},Me={class:"orderInfoItem"},Ne=l(()=>e("p",{class:"orderInfoItem__title"},"\u806F\u7D61\u96FB\u8A71",-1)),Ae={class:"orderInfoItem__content"},Fe={class:"orderInfoItem"},Pe=l(()=>e("p",{class:"orderInfoItem__title"},"\u806F\u7D61\u4FE1\u7BB1",-1)),Te={class:"orderInfoItem__content"},Le={class:"border-b border-gray-300 mb-4"},Ue={class:"orderInfoItem"},je=l(()=>e("p",{class:"orderInfoItem__title"},"\u8A02\u55AE\u7DE8\u865F",-1)),Be={class:"orderInfoItem__content"},De={class:"orderInfoItem"},Ee=l(()=>e("p",{class:"orderInfoItem__title"},"\u8A02\u55AE\u65E5\u671F",-1)),ze={class:"orderInfoItem__content"},Re={class:"orderInfoItem"},We=l(()=>e("p",{class:"orderInfoItem__title"},"\u8A02\u55AE\u72C0\u614B",-1)),qe={class:"orderInfoItem__content"},Ge={class:"orderInfoItem"},Je=l(()=>e("p",{class:"orderInfoItem__title"},"\u904B\u9001\u65B9\u5F0F",-1)),He={class:"orderInfoItem__content"},Ke={class:"orderInfoItem"},Qe=l(()=>e("p",{class:"orderInfoItem__title"},"\u904B\u9001\u5730\u5740",-1)),Xe={class:"orderInfoItem__content"},Ye={class:"orderInfoItem"},Ze=l(()=>e("p",{class:"orderInfoItem__title"},"\u8A02\u55AE\u539F\u91D1\u984D",-1)),$e={class:"orderInfoItem__content"},et={class:"orderInfoItem"},tt=l(()=>e("p",{class:"orderInfoItem__title"},"\u8A02\u55AE\u904B\u8CBB",-1)),st={class:"orderInfoItem__content"},ot={class:"orderInfoItem"},rt=l(()=>e("p",{class:"orderInfoItem__title"},"\u8A02\u55AE\u6298\u6263\u78BC",-1)),nt={class:"orderInfoItem__content"},lt={class:"orderInfoItem"},dt=l(()=>e("p",{class:"orderInfoItem__title"},"\u8A02\u55AE\u6298\u6263",-1)),at={class:"orderInfoItem__content"},it={class:"orderInfoItem"},ct=l(()=>e("p",{class:"orderInfoItem__title"},"\u8A02\u55AE\u7E3D\u91D1\u984D",-1)),_t={class:"orderInfoItem__content"},mt={class:"border-b border-gray-300 mb-4"},ut={class:"orderInfoItem"},pt=l(()=>e("p",{class:"orderInfoItem__title"},"\u4ED8\u6B3E\u65B9\u5F0F",-1)),bt={class:"orderInfoItem__content"},It={class:"orderInfoItem"},ht=l(()=>e("p",{class:"orderInfoItem__title"},"\u4ED8\u6B3E\u72C0\u614B",-1)),ft={class:"orderInfoItem__content"},vt={class:"orderInfoItem"},yt=l(()=>e("p",{class:"orderInfoItem__title"},"\u8CFC\u8CB7\u5546\u54C1\u9805\u76EE",-1)),gt={class:"orderProductList"},xt=["src","alt"],kt={class:"flex-1 mr-2"},wt={class:"text-sm text-gray-400"},Ot={class:"text-sm"},St={class:"overflow-y-scroll px-4 py-3 flex-shrink"},Ct=l(()=>e("h3",{class:"text-lg text-black font-medium mb-4 pb-4 border-b border-gray-300"}," \u7DE8\u8F2F\u8A02\u55AE ",-1)),Vt={class:"grid gap-4"},Mt=l(()=>e("p",{class:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2 pl-2"}," \u904B\u9001\u65B9\u5F0F ",-1)),Nt={class:"flex gap-4"},At=["onClick"],Ft=l(()=>e("p",{class:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2 pl-2"}," \u51FA\u8CA8\u72C0\u614B ",-1)),Pt={class:"flex mb-3 gap-4"},Tt=["onClick"],Lt=N("\u8A02\u55AE\u5099\u8A3B"),Ut=l(()=>e("div",{class:"border-b border-gray-300"},[e("p",{class:"text-sm text-gray-400 mb-2 pl-2"},"\u4ED8\u6B3E\u8CC7\u8A0A")],-1)),jt=l(()=>e("p",{class:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2 pl-2"}," \u4ED8\u6B3E\u65B9\u5F0F ",-1)),Bt={class:"flex mb-3 gap-4"},Dt=["onClick"],Et=l(()=>e("p",{class:"block uppercase tracking-wide text-gray-700 text-xs font-bold mb-2 pl-2"}," \u4ED8\u6B3E\u72C0\u614B ",-1)),zt={class:"flex mb-3 gap-4"},Rt=["onClick"],Wt={class:"bg-gray-100 p-4 flex justify-between"},qt={class:"flex"},Gt={class:"bg-gray-100 p-4 flex justify-between"},Jt=l(()=>e("button",{type:"submit",class:"rounded py-1.5 px-3 text-white bg-black hover:bg-black/80"}," \u4FDD\u5B58 ",-1));function Ht(n,s,a,t,p,d){const b=w("MoreMenu"),u=w("VeeFormInput"),y=w("FormInputTextArea"),i=w("Form");return c(),m(v,null,[e("div",{class:g(["siderBg--x z-sider w-2/3",{active:t.modalOpen}]),onClick:s[0]||(s[0]=_=>t.modalOpen=!1)},null,2),e("div",{class:g(["siderBox--x z-sider w-1/3",{active:t.modalOpen}])},[t.modalOpen?(c(),L(i,{key:0,class:"relative h-full border border-gray-300 flex flex-col",onSubmit:s[13]||(s[13]=_=>t.adminPutOrder(t.selectItem.id))},{default:F(({errors:_})=>[e("div",ve,[e("p",ye," \u7DE8\u865F\uFF1A"+r(`${t.selectItem.id.slice(1,12)}... `),1),e("div",ge,[f(b,{"item-id":t.selectItem.id,onDeleteItem:t.deleteOrder},null,8,["item-id","onDeleteItem"]),e("button",{type:"button",class:"border border-gray-200 rounded py-1 px-2 hover:border-gray-300 bg-white ml-2",onClick:s[1]||(s[1]=o=>t.modalOpen=!1)},ke)])]),x(e("div",we,[e("div",Oe,[e("div",Se,[Ce,e("p",Ve,r(t.selectItem.user.name),1)]),e("div",Me,[Ne,e("p",Ae,r(t.selectItem.user.tel),1)]),e("div",Fe,[Pe,e("p",Te,r(t.selectItem.user.email),1)])]),e("div",Le,[e("div",Ue,[je,e("p",Be,r(t.selectItem.id),1)]),e("div",De,[Ee,e("p",ze,r(t.selectItem.create_at),1)]),e("div",Re,[We,e("p",qe,r(t.payStatus[t.selectItem.user.pay.status]),1)]),e("div",Ge,[Je,e("p",He,r(t.shippingWay[t.selectItem.user.shipping.way]),1)]),e("div",Ke,[Qe,e("p",Xe,r(t.selectItem.user.address),1)]),e("div",Ye,[Ze,e("p",$e,"NT$ "+r(t.selectItem.total),1)]),e("div",et,[tt,e("p",st," NT$ "+r(t.selectItem.user.shipping.price),1)]),e("div",ot,[rt,e("p",nt,r(t.selectItem.user.discount.ticket||"\u7121"),1)]),e("div",lt,[dt,e("p",at,r(t.selectItem.user.discount.price||"\u7121"),1)]),e("div",it,[ct,e("p",_t," NT$ "+r(t.selectItem.user.finalPrice),1)])]),e("div",mt,[e("div",ut,[pt,e("p",bt,r(t.selectItem.user.name),1)]),e("div",It,[ht,e("p",ft,r(t.selectItem.user.tel),1)])]),e("div",vt,[yt,e("button",{type:"button",onClick:s[2]||(s[2]=o=>t.listOpen=!t.listOpen),class:g(["border border-gray-200 rounded py-1.5 px-3 hover:border-gray-300",{"border-black text-black hover:border-black":t.listOpen}])}," \u5C55\u958B ",2)]),x(e("ul",gt,[(c(!0),m(v,null,O(t.selectItem.products,o=>(c(),m("li",{class:"flex justify-between mb-3",key:o.product.id},[e("img",{class:"w-12 h-12 mr-2",src:o.product.imageUrl,alt:`${o.product.title}\u7522\u54C1\u5716\u7247`},null,8,xt),e("div",kt,[e("p",null,r(o.product.title),1),e("p",wt,"\u6578\u91CF\uFF1A "+r(o.qty)+" \u500B",1)]),e("p",Ot,"NT$ "+r(o.total),1)]))),128))],512),[[k,t.listOpen===!0]])],512),[[k,t.editMode===!1]]),x(e("div",St,[Ct,e("div",Vt,[f(u,{modelValue:t.selectItem.user.name,"onUpdate:modelValue":s[3]||(s[3]=o=>t.selectItem.user.name=o),"input-id":"userName","input-type":"text",errors:_,"label-name":"\u59D3\u540D","text-holder":"\u8ACB\u8F38\u5165\u59D3\u540D"},null,8,["modelValue","errors"]),f(u,{modelValue:t.selectItem.user.name,"onUpdate:modelValue":s[4]||(s[4]=o=>t.selectItem.user.name=o),"input-id":"userName","input-type":"text",errors:_,"label-name":"\u59D3\u540D","text-holder":"\u8ACB\u8F38\u5165\u59D3\u540D"},null,8,["modelValue","errors"]),f(u,{modelValue:t.selectItem.user.tel,"onUpdate:modelValue":s[5]||(s[5]=o=>t.selectItem.user.tel=o),"input-id":"userTel","input-type":"text",errors:_,"label-name":"\u806F\u7D61\u96FB\u8A71","text-holder":"\u8ACB\u8F38\u5165\u806F\u7D61\u96FB\u8A71"},null,8,["modelValue","errors"]),f(u,{modelValue:t.selectItem.user.email,"onUpdate:modelValue":s[6]||(s[6]=o=>t.selectItem.user.email=o),"input-id":"userEmail","input-type":"email",errors:_,"label-name":"Email","text-holder":"\u8ACB\u8F38\u5165Email"},null,8,["modelValue","errors"]),e("div",null,[Mt,e("div",Nt,[(c(!0),m(v,null,O(t.shippingWay,(o,I)=>(c(),m("button",{key:o,type:"button",class:g([{"bg-black text-white":t.selectItem.user.shipping.way===I},"border border-gray-300 py-1 px-2 hover:border-gray-300 bg-white"]),onClick:V=>t.selectItem.user.shipping.way=I},[e("p",null,r(o),1)],10,At))),128))])]),e("div",null,[Ft,e("div",Pt,[(c(!0),m(v,null,O(t.shippingStatus,(o,I)=>(c(),m("button",{key:o,type:"button",class:g([{"bg-black text-white":t.selectItem.user.shipping.status===I},"border border-gray-300 py-1 px-2 hover:border-gray-300 bg-white"]),onClick:V=>t.selectItem.user.shipping.status=I},[e("p",null,r(o),1)],10,Tt))),128))])]),f(u,{modelValue:t.selectItem.user.address,"onUpdate:modelValue":s[7]||(s[7]=o=>t.selectItem.user.address=o),"input-id":"userAddress","input-type":"text",errors:_,"label-name":"\u5730\u5740","text-holder":"\u8ACB\u8F38\u5165\u5730\u5740"},null,8,["modelValue","errors"]),f(y,{modelValue:t.selectItem.messages,"onUpdate:modelValue":s[8]||(s[8]=o=>t.selectItem.messages=o),"input-id":"messages","text-area-row":"5","text-holder":"\u5982\u60A8\u6709\u4EFB\u4F55\u9700\u6C42\uFF0C\u8ACB\u5728\u6B64\u7559\u8A00\u3002"},{default:F(()=>[Lt]),_:1},8,["modelValue"]),Ut,e("div",null,[jt,e("div",Bt,[(c(!0),m(v,null,O(t.payWay,(o,I)=>(c(),m("button",{key:o,type:"button",class:g([{"bg-black text-white":t.selectItem.user.pay.way===I},"border border-gray-300 py-1 px-2 hover:border-gray-300 bg-white"]),onClick:V=>t.selectItem.user.pay.way=I},[e("p",null,r(o),1)],10,Dt))),128))])]),e("div",null,[Et,e("div",zt,[(c(!0),m(v,null,O(t.payStatus,(o,I)=>(c(),m("button",{key:o,type:"button",class:g([{"bg-black text-white":t.selectItem.user.pay.status===I},"border border-gray-300 py-1 px-2 hover:border-gray-300 bg-white"]),onClick:V=>t.selectItem.user.pay.status=I},[e("p",null,r(o),1)],10,Rt))),128))])])])],512),[[k,t.editMode===!0]]),x(e("div",Wt,[e("div",qt,[e("button",{type:"button",onClick:s[9]||(s[9]=(...o)=>t.changePayState&&t.changePayState(...o)),class:"rounded py-1.5 px-3 bg-white hover:bg-white/50 mr-2"},r(t.selectItem.is_paid?"\u8B8A\u66F4\u672A\u6536":"\u8B8A\u66F4\u5DF2\u6536"),1),e("button",{type:"button",onClick:s[10]||(s[10]=o=>t.editMode=!0),class:"rounded py-1.5 px-3 bg-white hover:bg-white/50"}," \u7DE8\u8F2F\u8A02\u55AE ")]),e("button",{type:"button",onClick:s[11]||(s[11]=(...o)=>t.changeShippingStatus&&t.changeShippingStatus(...o)),class:"rounded py-1.5 px-3 text-white bg-black hover:bg-black/80"}," \u51FA\u8CA8 ")],512),[[k,t.editMode===!1]]),x(e("div",Gt,[e("button",{type:"button",onClick:s[12]||(s[12]=o=>t.editMode=!1),class:"rounded py-1.5 px-3 bg-white hover:bg-white/50 mr-2"}," \u53D6\u6D88\u7DE8\u8F2F "),Jt],512),[[k,t.editMode===!0]])]),_:1})):z("",!0)],2)],64)}var Kt=C(fe,[["render",Ht],["__scopeId","data-v-18b15a9d"]]);const Qt={components:{RowNav:B,AdminOrderListItem:ie,AdminOrderSlider:Kt},setup(){const n=h([]),s=h(1),a=h(!0),t=S(()=>{let i=[];return s.value===2?i=n.value.filter(_=>_.is_paid):s.value===3?i=n.value.filter(_=>!_.is_paid):i=n.value,i}),p=h({}),d=h(null),b=h(!1);function u(){M.adminGetOrders().then(i=>{i&&(n.value=Object.values(i))})}function y(i){p.value=JSON.parse(JSON.stringify(i))}return u(),{orderList:t,listState:s,modalState:d,modalOpen:b,selectItem:p,showed:a,productCategory:U,defaultProductData:j,getOrders:u,selectOrder:y}}},Xt={class:"relative bg-white"},Yt={class:"sticky top-0 bg-white z-40 px-5 pt-6 border-b border-gray-300 mb-6"},Zt=e("div",{class:"grid grid-cols-3 mb-8"},[e("div",{class:"col-span-1"},[e("h3",{class:"text-3xl font-medium"},"\u8A02\u55AE\u5217\u8868")]),e("div",{class:"col-span-2 flex justify-end"})],-1);function $t(n,s,a,t,p,d){const b=w("RowNav"),u=w("AdminOrderListItem"),y=w("AdminOrderSlider");return c(),m(v,null,[e("div",Xt,[e("div",Yt,[Zt,f(b,{"list-state":t.listState,"nav-array":["\u5168\u90E8\u8A02\u55AE","\u672A\u4ED8\u6B3E","\u5DF2\u4ED8\u6B3E"],onReturnState:s[0]||(s[0]=i=>t.listState=i)},null,8,["list-state"])]),(c(!0),m(v,null,O(t.orderList,i=>(c(),L(u,{key:i.id,order:i,onClick:_=>t.selectOrder(i)},null,8,["order","onClick"]))),128))]),f(y,{"select-order":t.selectItem,onGetOrders:t.getOrders},null,8,["select-order","onGetOrders"])],64)}var as=C(Qt,[["render",$t]]);export{as as default};
