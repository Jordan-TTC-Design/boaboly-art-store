import{T as c}from"./vendor.eae21ba8.js";import{f as l}from"./api.3680f533.js";import{s as r}from"./statusStore.f4307df1.js";const e=r(),g=c({id:"productStore",state:()=>({products:[],hotProducts:[],collections:[]}),getters:{collectionProduct(t){let o=[];return t.collections.forEach(s=>{t.products.forEach(i=>{i.id==s&&o.push(i)})}),o}},actions:{getProducts(){e.isLoading=!0,l.getProductAll().then(t=>{this.products=JSON.parse(JSON.stringify(t)),e.isLoading=!1})},getHotProducts(){e.isLoading=!0,l.getProductAll().then(t=>{t&&(this.hotProducts=JSON.parse(JSON.stringify(t)).filter(o=>o.promoted.star>0),e.isLoading=!1)})},getCollections(){this.collections=JSON.parse(localStorage.getItem("boaboly-store-collection")),this.collections===null&&(this.collections=[])},addCollection(t){const o=t.id,s=this.collections.indexOf(o);s<0?(this.collections.push(o),localStorage.setItem("boaboly-store-collection",JSON.stringify(this.collections)),e.openPopReminder("\u5DF2\u52A0\u5165\u6536\u85CF")):(this.collections.splice(s,1),localStorage.setItem("boaboly-store-collection",JSON.stringify(this.collections)),e.openPopReminder("\u5DF2\u79FB\u9664\u6536\u85CF")),this.getCollections()},deleteAllCollections(){localStorage.setItem("boaboly-store-collection",JSON.stringify([])),this.getCollections()}}});export{g as p};
