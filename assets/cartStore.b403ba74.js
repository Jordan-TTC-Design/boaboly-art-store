import{U as i}from"./vendor.dd24d7c7.js";import{f as e}from"./api.35fab65f.js";import{s as o}from"./statusStore.13921c37.js";const a=o(),d=i({id:"cartStore",state:()=>({carts:[],cartTotal:0,targetItem:{}}),getters:{cartAmount:r=>{let t=0;return r.carts.forEach(s=>{t+=s.qty}),t},shippingFee:r=>{let t=60;return r.cartTotal>=1e3&&(t=0),t},orderTotal(r){return this.shippingFee+r.cartTotal}},actions:{getCart(){a.isLoading=!0,e.getCart().then(r=>{this.carts=JSON.parse(JSON.stringify(r.carts)),this.cartTotal=r.total,a.isLoading=!1})},addCart(r,t){a.isLoading=!0,e.addCart(r,t).then(()=>{a.openPopReminder("\u6210\u529F\u52A0\u5165\u8CFC\u7269\u8ECA"),this.getCart()})},updateCart(r,t){a.isLoading=!0,e.editCart(r,t).then(()=>{this.getCart()})},deleteCart(r){a.isLoading=!0,e.deleteCart(r).then(()=>{a.openPopReminder("\u6210\u529F\u522A\u9664"),this.getCart()})},deleteCartAll(){a.isLoading=!0,e.deleteCartAll().then(()=>{a.openPopReminder("\u6210\u529F\u522A\u9664"),this.getCart()})},editCartAmount(r,t){r>0?(this.carts[t].qty+=1,this.updateCart(this.carts[t].qty,this.carts[t].id)):this.carts[t].qty>1&&(this.carts[t].qty-=1,this.updateCart(this.carts[t].qty,this.carts[t].id))}}});export{d as c};
