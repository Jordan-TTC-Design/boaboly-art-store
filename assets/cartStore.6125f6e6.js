import{T as i}from"./vendor.eae21ba8.js";import{f as e}from"./api.b01730aa.js";import{s as o}from"./statusStore.f4307df1.js";const a=o(),c=i({id:"cartStore",state:()=>({carts:[],cartTotal:0}),getters:{cartAmount:t=>{let r=0;return t.carts.forEach(s=>{r+=s.qty}),r},shippingFee:t=>{let r=60;return t.cartTotal>=1e3&&(r=0),r},orderTotal(t){return this.shippingFee+t.cartTotal}},actions:{getCart(){a.isLoading=!0,e.getCart().then(t=>{this.carts=JSON.parse(JSON.stringify(t.carts)),this.cartTotal=t.total,a.isLoading=!1})},addCart(t,r){a.isLoading=!0,e.addCart(t,r).then(()=>{a.openPopReminder("\u6210\u529F\u52A0\u5165\u8CFC\u7269\u8ECA"),this.getCart()})},updateCart(t,r){a.isLoading=!0,e.editCart(t,r).then(()=>{this.getCart()})},deleteCart(t){a.isLoading=!0,e.deleteCart(t).then(()=>{a.openPopReminder("\u6210\u529F\u522A\u9664"),this.getCart()})},deleteCartAll(){a.isLoading=!0,e.deleteCartAll().then(()=>{a.openPopReminder("\u6210\u529F\u522A\u9664"),this.getCart()})},editCartAmount(t,r){this.carts[r].qty>1&&(t>0?this.carts[r].qty+=1:this.carts[r].qty-=1,this.updateCart(this.carts[r].qty,this.carts[r].id))}}});export{c};
